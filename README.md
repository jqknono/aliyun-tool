# 阿里云脚本工具

## 安装依赖

```shell
npm install ali-oss --save
```

## 删除 bucket 中的所有文件

当我想起曾开过一个不再使用的 bucket 时, 已是`2023/05/06`, 而 bucket 的创建时间是`2014年7月16日 14:36`. 用途是记录 ECS 主机的日志, 所有日志文件在根目录, 在网页上操作删除文件, 每页显示 500 个文件时网页已非常卡顿. 删了几页发现不对劲, 文件日期几乎没有变化, 仔细查看发现每条日志仅 0.3k, 每小时创建一个日志文件, 十年间约产生 8w 个日志文件, 每页 500 条需删 170 次, 每次删除约摸等到半分钟到一分钟, 一共要删 85 分钟到 170 分钟, 一两个小时的事情, 用脚本一分钟处理完.

不要随便开启这个功能, 如果开启, 应接受建议将日志放在一个文件夹内.

![picture 1](https://s2.loli.net/2023/05/06/jycoKluRNTp9gGX.png)

Usage:

```shell
node ./script/delete_all_from_bucket.js
```
